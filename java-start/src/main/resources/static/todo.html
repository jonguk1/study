<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ToDo List</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="todo.css">
    <script src="user.js"></script>
    <script src="todo.js"></script>
</head>
<body class="bg-light">
<div class="container py-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">ToDo List</h2>
        <div>
            <span id="user-info" class="fw-bold"></span>
            <button id="logout-btn" class="btn btn-outline-danger btn-sm ms-2" style="display:none;">로그아웃</button>
        </div>
    </div>
    <div id="error-message" class="alert alert-danger d-none" role="alert"></div>
    <div class="input-group mb-3">
        <input type="text" id="todo-input" class="form-control" placeholder="할 일을 입력하세요">
        <button class="btn btn-primary" id="add-btn">추가</button>
    </div>
    <ul class="list-group" id="todo-list"></ul>
</div>
<script>
    // 로그인한 사용자 이름 표시 및 로그아웃 버튼 처리
    window.onload = function() {
        const username = localStorage.getItem('username');
        const userInfo = document.getElementById('user-info');
        const logoutBtn = document.getElementById('logout-btn');
        if (username) {
            userInfo.textContent = `${username}님`;
            logoutBtn.style.display = 'inline-block';
        } else {
            userInfo.textContent = '';
            logoutBtn.style.display = 'none';
        }
        logoutBtn.onclick = function() {
            logout();
            location.href = '/';
        };
        if (typeof loadTodos === 'function') loadTodos();
    }
</script>
</body>
</html>
